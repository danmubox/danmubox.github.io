<link rel="stylesheet" type="text/css" href="lib/fontawesome-5.9.0/all.min.css">
<link rel="stylesheet" type="text/css" href="lib/bootstrap-table-1.14.2/bootstrap-table.min.css">
<h1 class="text-center m-3">转&nbsp;&nbsp;&nbsp;&nbsp;换</h1>
<hr />
<form>
    <fieldset id="main-form" class="form-group">
        <div id="accordion">
            <div class="card">
                <a class="card-link" data-toggle="collapse" href="#input">
                    <div class="card-header">
                        输入
                    </div>
                </a>
                <div id="input" class="collapse show" data-parent="#accordion">
                    <div class="card-body">
                        <div id="toolbar">
                            <label class="input-group-btn" style="cursor: pointer;">
                                <span class="btn btn-primary btn-sm">
                                    <i class="fa fa-folder-open" aria-hidden="true"></i>
                                    添&nbsp;加<input id="file-input" type="file" style="display: none;" multiple>
                                </span>
                            </label>
                            <button id="btn-remove" type="button" class="btn btn-danger btn-sm" disabled>
                                <i class="fa fa-minus" aria-hidden="true"></i>
                                移&nbsp;除
                            </button>
                            <button id="btn-clear" type="button" class="btn btn-dark btn-sm" disabled>
                                <i class="fa fa-trash" aria-hidden="true"></i>
                                清&nbsp;空
                            </button>
                        </div>
                        <table id="table" data-toggle="table" data-thead-classes="thead-light"  data-locale="zh-CN-drag" data-height="auto" data-unique-id="name" data-toolbar="#toolbar" data-click-to-select="true">
                            <thead>
                                <tr>
                                    <th data-field="chk" data-checkbox="true"></th>
                                    <th data-field="name">名称</th>
                                    <th data-field="length" data-formatter="Common.renderSize">大小</th>
                                    <th data-field="num">弹幕数量</th>
                                    <th data-field="chatserver" data-formatter="DanMuResolver.danmuFromResolve">来源</th>
                                    <th data-field="state" data-formatter="DanMuResolver.stateParse">状态</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card">
                <a class="collapsed card-link" data-toggle="collapse" href="#base-param">
                    <div class="card-header">
                        基础参数
                    </div>
                </a>
                <div id="base-param" class="collapse" data-parent="#accordion">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-8">
                                <form>
                                    <div class="form-row">
                                        <div class="form-group col-md-6">
                                            <label>视频宽度</label>
                                            <div class="input-group" data-trigger="spinner">
                                                <div class="input-group-prepend">
                                                    <button class="btn btn-outline-primary fa fa-minus-circle" type="button" data-spin="down"></button>
                                                </div>
                                                <input id="txt-video-width" type="text" class="form-control text-center" value="672" data-min="1" data-step="1">
                                                <div class="input-group-append">
                                                    <button class="btn btn-outline-primary fa fa-plus-circle" type="button" data-spin="up"></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label>视频高度</label>
                                            <div class="input-group" data-trigger="spinner">
                                                <div class="input-group-prepend">
                                                    <button class="btn btn-outline-primary fa fa-minus-circle" type="button" data-spin="down"></button>
                                                </div>
                                                <input id="txt-video-height" type="text" class="form-control text-center" value="504" data-min="1" data-step="1">
                                                <div class="input-group-append">
                                                    <button class="btn btn-outline-primary fa fa-plus-circle" type="button" data-spin="up"></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-10">
                                            <label>字体</label>
                                            <div class="input-group mb-3">
                                                <select class="form-control custom-select" id="slt-font">
                                                </select>
                                                <div class="input-group-append">
                                                    <span class="input-group-text" data-toggle="tooltip" data-placement="top" title="本机需安装相应字体才能看到效果">
                                                        <i class="fa fa-info-circle"></i>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-2">
                                            <label for="inputPassword4">加粗</label>
                                            <input id="ckb-font-bold" class="form-control" type="checkbox">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-sm-4 text-center" style="border: 1px solid #ddd;line-height: 200px;">
                                <p id="font-example" style="font-size:25pt;">字幕</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="text-center">
                                    <p class="m-0 float-left">字缩放</p>
                                    <p class="m-0">[&nbsp;<d>100</d>%&nbsp;]</p>
                                </div>
                                <input id="rge-font-scale" type="range" class="custom-range" min="1" max="250" value="100">
                            </div>
                            <div class="col-sm-12 mt-2">
                                <div class="text-center">
                                    <p class="m-0 float-left">透明度</p>
                                    <p class="m-0">[&nbsp;<d>50</d>%&nbsp;]</p>
                                </div>
                                <input id="rge-font-opacity" type="range" class="custom-range" min="1" max="100" value="50">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <a class="collapsed card-link" data-toggle="collapse" href="#extend-param">
                    <div class="card-header">
                        扩展参数
                    </div>
                </a>
                <div id="extend-param" class="collapse" data-parent="#accordion">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="text-center">
                                    <p class="m-0 float-left">字幕范围</p>
                                    <p class="m-0">[&nbsp;<d>100</d>%&nbsp;]</p>
                                </div>
                                <input id="rge-range-scale" type="range" class="custom-range" min="1" max="100" value="100">
                            </div>
                            <div class="col-sm-12 mt-2">
                                <div class="text-center">
                                    <p class="m-0 float-left">滚动停留</p>
                                    <p class="m-0">[&nbsp;<d>12</d>秒&nbsp;]</p>
                                </div>
                                <input id="rge-roll-stay" type="range" class="custom-range" min="1" max="30" value="12">
                            </div>
                            <div class="col-sm-12 mt-2">
                                <div class="text-center">
                                    <p class="m-0 float-left">顶底停留</p>
                                    <p class="m-0">[&nbsp;<d>4</d>秒&nbsp;]</p>
                                </div>
                                <input id="rge-fixed-stay" type="range" class="custom-range" min="1" max="15" value="4">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-form-label">输出方式：</label>
            <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" id="outPutTypePackage" name="outPutType" class="custom-control-input" value="0" checked="true">
                    <label class="custom-control-label" for="outPutTypePackage" data-toggle="tooltip" data-placement="top" title="当仅有一个待转换文件时，不会打包">打包</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                    <input type="radio" id="outPutTypeEach" name="outPutType" class="custom-control-input" value="1">
                    <label class="custom-control-label" for="outPutTypeEach">逐个</label>
                </div>
        </div>
        <button id="btn-convert" type="button" class="btn btn-primary btn-block" disabled>
            <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
            转&nbsp;&nbsp;&nbsp;&nbsp;换</button>
    </fieldset>
</form>
<div class="modal fade" id="modal-drag" keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center" style="padding:50px;border: 2px dashed #FFF;background: transparent;opacity: 0.5;">
            <h1 style="color: #FFF;">松开后添加文件</h1>
        </div>
    </div>
</div>
<script id="ass-template" type="text/html">
[Script Info]
Title: {{script.title}}
ChatServer：{{script.chatServer}}
ChatId：{{script.chatId}}
ScriptType: v4.00+
PlayResX: {{script.playResX}}
PlayResY: {{script.playResY}}

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: {{style.name}},{{style.fontName}},{{style.fontSize}},&H{{style.alpha}}{{style.fontColor}},&H{{style.alpha}}FFFFFF,&H{{style.alpha}}000000,&H{{style.alpha}}000000,{{#style.bold}}1{{/style.bold}}{{^style.bold}}-1{{/style.bold}},0,0,0,100,100,0,0,1,1,0,2,20,20,2,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
{{#events}}
Dialogue: {{layer}},{{start}},{{end}},{{style.name}},,69,69,5,,{\{{effect.value}}{{#effect.fontSize}}\fs{{effect.fontSize}}{{/effect.fontSize}}{{#effect.fontColor}}\c&H{{effect.fontColor}}{{/effect.fontColor}}}{{text}}
{{/events}}
</script>
<script type="text/javascript" src="lib/bootstrap-table-1.14.2/bootstrap-table.min.js"></script>
<script type="text/javascript" src="lib/bootstrap-table-1.14.2/locale/bootstrap-table-zh-CN-drag.min.js"></script>
<script type="text/javascript" src="lib/jquery-spinner-0.2.1/js/jquery.spinner.min.js"></script>
<script type="text/javascript" src="lib/jszip-3.2.0/jszip.min.js"></script>
<script type="text/javascript" src="lib/mustache-js-3.0.1/mustache.min.js"></script>
<script type="text/javascript" src="lib/FileSaver-js-2.0.2/FileSaver.min.js"></script>
<script type="text/javascript" src="bin/danmu/danmu.js"></script>
<script type="text/javascript" src="bin/convert/ass.js"></script>
<script type="text/javascript" src="bin/danmu/danmu-resolver.js"></script>
<script type="text/javascript" src="bin/convert/danmu-convert.js"></script>
<script type="text/javascript" src="lib/font-family-1.0/font-datas.min.js"></script>
<script type="text/javascript" src="bin/danmu/danmu-table.js"></script>
<script type="text/javascript" src="bin/convert/convert.min.js"></script>